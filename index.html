<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script defer src="js/vue.js"></script>
    <script defer src="js/main.js"></script>
    <link rel="stylesheet" href="css/main.css">
    <title>Task Manager</title>
</head>
<body>
    <div id="app">
        <div class="columns">
            <div class="column planned-column" :class="{ locked: isPlannedColumnLocked }">
                <h2>Запланированные задачи</h2>
                <form @submit.prevent="addNewTask" class="card-form" :class="{ disabled: isPlannedColumnLocked }">
                    <div class="form-group">
                        <label>Заголовок:</label>
                        <input v-model="newTask.title" placeholder="Название задачи" required :disabled="isPlannedColumnLocked">
                    </div>
                    <div class="form-group">
                        <label>Описание:</label>
                        <textarea v-model="newTask.description" placeholder="Подробное описание" :disabled="isPlannedColumnLocked"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Дедлайн:</label>
                        <input v-model="newTask.deadline" type="date" required :disabled="isPlannedColumnLocked">
                    </div>
                    <button type="submit" :disabled="isInvalidTask || isPlannedColumnLocked">Добавить задачу</button>
                </form>
                <div class="cards-container">
                    <task-card 
                        v-for="task in columns.planned" 
                        :key="task.id"
                        :title="task.title" 
                        :description="task.description"
                        :deadline="task.deadline"
                        :created-at="task.createdAt"
                        :can-move-forward="!isPlannedColumnLocked"
                        :can-move-back="false"
                        :can-edit="true"
                        :can-delete="true"
                        column="planned"
                        @move-forward="moveTaskForward(task.id)"
                        @update-task="updateTask(task.id, $event)"
                        @delete-task="deleteTask(task.id)">
                    </task-card>
                </div>
            </div>
            
            <div class="column in-progress-column">
                <h2>Задачи в работе</h2>
                <div class="cards-container">
                    <task-card 
                        v-for="task in columns.inProgress" 
                        :key="task.id"
                        :title="task.title" 
                        :description="task.description"
                        :deadline="task.deadline"
                        :created-at="task.createdAt"
                        :can-move-forward="true"
                        :can-move-back="true"
                        :can-edit="true"
                        :can-delete="true"
                        column="inProgress"
                        @move-forward="moveTaskForward(task.id)"
                        @move-back="moveTaskBack(task.id)"
                        @update-task="updateTask(task.id, $event)"
                        @delete-task="deleteTask(task.id)">
                    </task-card>
                </div>
            </div>
            
            <div class="column testing-column">
                <h2>Тестирование</h2>
                <div class="cards-container">
                    <task-card 
                        v-for="task in columns.testing" 
                        :key="task.id"
                        :title="task.title" 
                        :description="task.description"
                        :deadline="task.deadline"
                        :created-at="task.createdAt"
                        :can-move-forward="true"
                        :can-move-back="true"
                        :can-edit="true"
                        :can-delete="true"
                        column="testing"
                        @move-forward="moveTaskForward(task.id)"
                        @move-back="moveTaskBack(task.id)"
                        @update-task="updateTask(task.id, $event)"
                        @delete-task="deleteTask(task.id)">
                    </task-card>
                </div>
            </div>
            
            <div class="column completed-column">
                <h2>Выполненные задачи</h2>
                <div class="cards-container">
                    <task-card 
                        v-for="task in columns.completed" 
                        :key="task.id"
                        :title="task.title" 
                        :description="task.description"
                        :deadline="task.deadline"
                        :created-at="task.createdAt"
                        :can-move-forward="false"
                        :can-move-back="true"
                        :can-edit="false"
                        :can-delete="true"
                        column="completed"
                        @move-back="moveTaskBack(task.id)"
                        @delete-task="deleteTask(task.id)">
                    </task-card>
                </div>
            </div>
        </div>
    </div>
</body>
</html>